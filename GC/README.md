## GC

#### 1.什么是垃圾

> C语言：malloc  free
>
> cpp: mew delete
>
> Java：New 自动回收

#### 2.回收

> 引用计数法
>
> 根可达算法：GCroot可以是线程栈变量 静态变量 常量池 JNI指令

#### 3 GC算法

1. 标记-清除：快但是会产生内存碎片
2. i复制-清除：不会产生内存碎片，但是内存会被分成两份，浪费空间大
3. 标记-整理：不会产生内存随便而且不会浪s费空间，但是效率低

#### 4.JVM

常用的生产环境的GC是PS和PO

#### 5. G1

分成了一个个region，每个region被分代。

![image-20200607111509844](C:\Users\there\AppData\Roaming\Typora\typora-user-images\image-20200607111509844.png)



### JVM调优

##### 调优基本概念

1. 吞吐量：用户代码执行时间/（用户代码执行时间+JVM垃圾回收时间）
2. 响应时间：STW越短越好，

一般来说 科学计算、数据挖掘等数学计算的吞吐量优先（PS+PO）

而对于网站的开发来说是响应时间优先（G1）

#### 对于OOM

步骤是固定的

首先查看进程

然后用jmap看对应的实例个数，就可以看出哪个实例一直被创建并且不被回收